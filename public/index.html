<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Filespace</title>
	<link rel="shortcut icon" href="../favicon.ico">
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.2.0/css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="css/modal.css" />
	<link rel="stylesheet" href="galaxy/galaxy.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-corner-indicator.css">


</head>

<body ondragstart="return false">
	<div g="centered xlg-container">
		<section g="centered">
			<aside g="column lg-padding-t xlg-padding-lr">
				<h3><span class="logo"></span>Filespace</h3>
				<button id="upload"><i class="fa fa-upload"></i></button>
				<input id="upload_file" type="file" style="display:none">
				<ul style="list-style-type: none" g="left">

					<li><img src="iconic/svg/file.svg" class="menu-icon">Files</li>
					<li><img src="iconic/svg/image.svg" class="menu-icon">Photos</li>
					<li><img src="iconic/svg/share.svg" class="menu-icon">Sharing</li>
					<hr style="margin: .5em 0">
					<li><a id="authorize-button" style="visibility: hidden">Add account <i class="fa fa-plus"></i></a></li>
					
				</ul>
				<ul style="padding-top: 76px;">
					<span style="font-size: .9em; color: rgba(103, 103, 103, 0.39)"><span id="used_data">23MB</span>/ <span class="total_data">4112MB</span></span>
					<div style="height: .3em; background: #000; width: 100%;"></div>
				</ul>
			</aside>
			<div g="column" id="before_grid">
				<img src="https://s.gravatar.com/avatar/ddd0766bc90ec946f29d32589836cf2c?s=80" width="50" style="position: absolute; right: 1em; top: 3em; width: 50px; height: 50px; border-radius: 50%; cursor: pointer" id="trigger-overlay">
				<header g="left lg-margin-t" class="banner">
					<h4>Home</h4>
				</header>
				<hr>
				<section id="grid" class="grid clearfix" g="between"></section>
			</div>

		</section>


		<div id="drop-area" class="drop-area">
			<div class="drop-area__item"></div>
			<div class="drop-area__item"></div>
		</div>

		<div class="drop-overlay"></div>
	</div>
	<div class="overlay overlay-hugeinc">
	<button type="button" class="overlay-close">Close</button>
	<nav>
		<form action="">
			<input type="text" placeholder="Your email" g="4 centered">
			<input type="password" placeholder="Your password" g="4 centered">
			<button g="primary 4 centered">Add account</button>
		</form>
	</nav>
</div>
	<!-- <div id="add_accounts">
		<form action="">
			<input type="text" placeholder="Your email">
			<input type="password" placeholder="Your password">
			<button g="primary">Add account</button>
		</form>
		
	</div> -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="http://devble.com/examples/fullscreen-menu/modernizr.custom.js"></script>
	<script src="http://devble.com/examples/fullscreen-menu/classie.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
	<script src="https://www.dropbox.com/static/api/dropbox-datastores-1.0-latest.js"></script>
	
	<script src="js/script.js"></script>
	<script src="js/draggabilly.pkgd.min.js"></script>
	<script src="js/dragdrop.js"></script>
    <script type="text/javascript">
      var clientId = '766073445398-mj7vlvphri2a54pkmn1e9eapu3dkc6f3.apps.googleusercontent.com';
      var apiKey = 'AIzaSyAOCKS4OLptIyuefC2OBdPEi9uJU840GAQ';
      // To enter one or more authentication scopes, refer to the documentation for the API.
      var scopes = 'https://www.googleapis.com/auth/drive';

      // Use a button to handle authentication the first time.
      function handleClientLoad() {
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth,1);
      }

      function checkAuth() {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
      }

      function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult && !authResult.error) {
          authorizeButton.style.visibility = 'hidden';
          makeApiCall();
        } else {
          authorizeButton.style.visibility = '';
          authorizeButton.onclick = handleAuthClick;
        }
      }

      function handleAuthClick(event) {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        return false;
      }

      // Load the API and make an API call.  Display the results on the screen.
      function makeApiCall() {
        gapi.client.load('drive', 'v2', function() {

          var request = gapi.client.drive.files.list ();

          request.execute(function(resp) {          
            for (i=0; i<resp.items.length; i++) {

            	var name = resp.items[i].title;
            	var url = resp.items[i].thumbnailLink;
            	var createdDate = Date.parse(resp.items[i].createdDate);
            	createdDate = timeSince(createdDate);
            	console.log(createdDate);
            	var icon = '<i class="fa fa-fw fa-file-' + getIcon(getType(name)) + '"></i>';
            	if (url) icon = '';
        		var card = '<div g="column"><a href="' + url + '" download><div class="grid__item grid_photo ' + '" style="background-image: url(' + url + ')">' + icon + '</div><label>' + name + '</label></a><span style="font-size: 0.7em">' + createdDate + '</span></div>';
    			$('#grid').append(card);
            	//var dateCreated = resp.items[i].createdDate;
            	//var date = timeSince(dateCreated);

            }
          });      
        });
      }






function initGrid() {
	var body = document.body,
		dropArea = document.getElementById( 'drop-area' ),
		droppableArr = [], dropAreaTimeout;

	[].slice.call( document.querySelectorAll( '#drop-area .drop-area__item' )).forEach( function( el ) {
		droppableArr.push( new Droppable( el, {
			onDrop : function( instance, draggableEl ) {
				// show checkmark inside the droppabe element
				classie.add( instance.el, 'drop-feedback' );
				clearTimeout( instance.checkmarkTimeout );
				instance.checkmarkTimeout = setTimeout( function() {
						classie.remove( instance.el, 'drop-feedback' );
				}, 800 );
				// ...
			}
		} ) );
	} );

	[].slice.call(document.querySelectorAll( '#grid .grid__item' )).forEach( function( el ) {
		new Draggable( el, droppableArr, {
			draggabilly : { containment: document.body },
			onStart : function() {
				// add class 'drag-active' to body
				classie.add( body, 'drag-active' );
				// clear timeout: dropAreaTimeout (toggle drop area)
				clearTimeout( dropAreaTimeout );
				// show dropArea
				classie.add( dropArea, 'show' );
			},
			onEnd : function( wasDropped ) {
				var afterDropFn = function() {
					// hide dropArea
					classie.remove( dropArea, 'show' );
					// remove class 'drag-active' from body
					classie.remove( body, 'drag-active' );
				};

				if( !wasDropped ) {
					afterDropFn();
				}
				else {
					// after some time hide drop area and remove class 'drag-active' from body
					clearTimeout( dropAreaTimeout );
					dropAreaTimeout = setTimeout( afterDropFn, 400 );
				}
			}
		});
	});
}
initGrid();
    </script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>    
</body>
</html>